chrome.runtime.onMessage.addListener((e,s,r)=>{if(e.action!=="DOWNLOAD_MD")return!1;let t="data:text/markdown;charset=utf-8,"+encodeURIComponent(e.content);return chrome.downloads.download({url:t,filename:n(e.filename),saveAs:!1},a=>{chrome.runtime.lastError?r({success:!1,error:chrome.runtime.lastError.message}):r({success:!0,downloadId:a})}),!0});function n(e){return e.replace(/[<>:"/\\|?*\x00-\x1f]/g,"_").replace(/\s+/g,"-").replace(/-{2,}/g,"-").replace(/^-|-$/g,"").slice(0,200)}
